<mat-toolbar class="mat-toolbar mat-toolbar-single-row">
    {{ 'Employees' }}
    <button mat-icon-button style="margin-left:15px;" (click)="loadEmployees()">
        <mat-icon>refresh</mat-icon>
    </button>
        <button mat-raised-button color="accent" style="margin-left:30px;" *ngIf="isSearchButtonShown" (click)="filterAndSortEmployees()"> {{ 'Search' }} </button>
</mat-toolbar>
<div style="height:4px;">
        <mat-progress-bar mode="query" style="width:100%;" *ngIf="isLoading"></mat-progress-bar>
</div>

<table mat-table [dataSource]="dataSource" matSort>

    <!-- First Name -->
    <ng-container matColumnDef="first-name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'First Name'}} </th>
        <td mat-cell *matCellDef="let row"> {{ row.firstName }} </td>
    </ng-container>
    <ng-container matColumnDef="search-by-first-name">
        <th mat-header-cell *matHeaderCellDef>
            <form>
                <mat-form-field>
                    <input matInput placeholder="{{ 'Search by first name' }}" name="first-name" type="text" [(ngModel)]="filter.firstName" (keyup)="searchSettingsChanged()" (keyup.enter)="filterAndSortEmployees()">
                </mat-form-field>
            </form>
        </th>
    </ng-container>

    <!-- Last name -->
    <ng-container matColumnDef="last-name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Last Name'}} </th>
        <td mat-cell *matCellDef="let row"> {{ row.lastName ?? "" }} </td>
    </ng-container>
    <ng-container matColumnDef="search-by-last-name">
        <th mat-header-cell *matHeaderCellDef>
            <form>
                <mat-form-field>
                    <input matInput placeholder="{{ 'Search by last name' }}" name="lastName" type="text" [(ngModel)]="filter.lastName" (keyup)="searchSettingsChanged()" (keyup.enter)="filterAndSortEmployees()">
                </mat-form-field>
            </form>
        </th>
    </ng-container>

    <!-- Date of birth -->
    <ng-container matColumnDef="date-of-birth">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Date of Birth'}} </th>
        <td mat-cell *matCellDef="let row"> {{ row.dateOfBirth | date }} </td>
    </ng-container>
    <ng-container matColumnDef="search-by-date-of-birth-placeholder">
        <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <!-- Job title -->
    <ng-container matColumnDef="job-title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Job Title'}} </th>
        <td mat-cell *matCellDef="let row"> {{ row.jobTitle }} </td>
    </ng-container>
    <ng-container matColumnDef="search-by-job-title">
        <th mat-header-cell *matHeaderCellDef>
            <form>
                <mat-form-field>
                    <mat-select placeholder="{{ 'Search by job title' }}" name="jobTitle" [(ngModel)]="filter.jobTitle" (selectionChange)="searchSettingsChanged()" (keyup.enter)="filterAndSortEmployees()">
                        <mat-option *ngFor="let jobTitle of jobTitles" [value]="jobTitle"> {{ jobTitle }} </mat-option>
                    </mat-select>
                </mat-form-field>
            </form>
        </th>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns;"></tr>
    <tr mat-header-row *matHeaderRowDef="displayedSearchColumns;"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" [attr.colspan]="displayedColumns.length" style="text-align:center;">
            <ng-container *ngIf="isLoading">Please wait...</ng-container>
            <ng-container *ngIf="!isLoading">No data matching the filter.</ng-container>
        </td>
    </tr>
</table>

<mat-paginator [length]="pagination.totalResults" [pageSizeOptions]="pagination.pageSizeOptions" showFirstLastButtons>
</mat-paginator>